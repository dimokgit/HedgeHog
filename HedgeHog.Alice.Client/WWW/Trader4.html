<!DOCTYPE html>
<html>
<head>
  <title>Trader 4</title>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--#region-->
  <link rel="apple-touch-icon" sizes="57x57" href="HedgeHog.ico/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="HedgeHog.ico/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="HedgeHog.ico/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="HedgeHog.ico/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="HedgeHog.ico/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="HedgeHog.ico/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="HedgeHog.ico/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="HedgeHog.ico/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="HedgeHog.ico/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="HedgeHog.ico/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="HedgeHog.ico/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="HedgeHog.ico/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="HedgeHog.ico/favicon-16x16.png">
  <link rel="manifest" href="HedgeHog.ico/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="HedgeHog.ico/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <!--#endregion-->
  <!--#region CSS-->
  <link href="Scripts/jquery-ui-1.12.1.custom/jquery-ui.min.css" rel="stylesheet" />
  <!--<link href="Scripts/jquery-ui-1.12.1.custom/jquery-ui.structure.min.css" rel="stylesheet" />
  <link href="Scripts/jquery-ui-1.12.1.custom/jquery-ui.theme.min.css" rel="stylesheet" />-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
  <link href="scripts/bootstrap-toggle.min.css" rel="stylesheet">
  <link rel="stylesheet" href="d3-knockout/style/bar-chart-demo.css" />
  <link href="Styles/BS-dropdown-submenu.css" rel="stylesheet" />
  <!--  <link rel='stylesheet prefetch' href='https://cdn.rawgit.com/ValYouW/jqPropertyGrid/9218bbd5df05bf7efe58591f434ea27ece11a045/jqPropertyGrid.css' />-->
  <link rel='stylesheet prefetch' href='Scripts/jqPropertyGrid.css' />
  <link rel="stylesheet" href="Styles/pnotify.custom.min.css" />
  <link rel="stylesheet" href="Styles/pnotify.picon.css" />
  <link rel="stylesheet" href="Styles/oxygen/icons.css" />
  <link href="Styles/font-wesome/font-awesome.css" rel="stylesheet" />
  <!--#endregion-->
  <!--#region scripts-->
  <script src="Scripts/jquery-3.1.1.min.js"></script>
  <script src="Scripts/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="scripts/bootstrap-toggle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.4.1/knockout.mapping.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout-es5/0.4.6/knockout-es5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"></script>
  <script src="bower_components/d3/d3.min.js"></script>
  <!--<script src="Scripts/techan.min.js"></script>-->
  <script src="Scripts/jquery.ui.touch-punch.min.js"></script>
  <script src="Scripts/shortcut.js"></script>
  <script src="Scripts/linq.js"></script>
  <script src="Scripts/json.date-extensions.min.js"></script>
  <script src="Scripts/traverse.js"></script>
  <!--<script src="Scripts/jquery.signalR-2.2.0.min.js"></script>-->
  <script src="Scripts/jquery.signalR.js"></script>
  <script src="signalr/hubs"></script>
  <!--<script src="Scripts/bootstrap-notify.min.js"></script>-->
  <script src="Scripts/pnotify.custom.min.js"></script>
  <!--<script src='https://cdn.rawgit.com/ValYouW/jqPropertyGrid/9218bbd5df05bf7efe58591f434ea27ece11a045/jqPropertyGrid.js'></script>-->
  <script src='Scripts/jqPropertyGrid.js'></script>
  <script src='d3-knockout/custom-binding-handlers/trend-line-chart-binding.js'></script>
  <!--#endregion-->

  <style type="text/css">
    body, html {
      padding: 0;
      margin: 0;
      height: 100%;
      overflow: visible;
    }

    .container {
      margin: 0;
    }

    ul, li {
      padding: 0;
      margin: 0;
    }

    #discussion {
      padding: 0;
    }

    #profit, #openTradeGross {
      display: inline-block;
    }

    .profit {
      background-color: chartreuse;
      font-weight: bold;
    }

    .trade-condition {
      color: brown;
    }

      .trade-condition.or {
        font-style: italic;
      }

      .trade-condition.on {
        color: forestgreen;
        font-weight: bold;
      }

    .loss {
      background-color: #ffd3d9;
      font-weight: bold;
    }
    /*#region Bootstrap */
    .navbar-nav > li > a {
      padding-top: 1px !important;
      padding-bottom: 1px !important;
    }

    .navbar {
      min-height: 0 !important;
      margin-bottom: 0;
    }

    .navbar-brand {
      float: left;
      height: auto;
      padding: 0;
      font-size: inherit;
      line-height: none;
    }

    .nav-divider.thin {
      width: 2px;
    }

    .dropdown-menu.multi-level.md {
      min-width: 190px;
      padding-left: 5px;
    }

    /*#endregion */

    .modal-header {
      min-height: 1em;
      padding: 5px;
    }

    .navbar-toggle {
      padding-bottom: 0;
      padding-top: 0;
    }

    .modal-body {
      padding: 5px;
    }

    .form-horizontal .form-group {
      margin-bottom: 0;
      margin-left: 0;
      margin-right: 0;
    }

    [data-notify="progressbar"] {
      margin-bottom: 0;
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 5px;
    }

    #settingsGrid .ui-spinner input[type=text] {
      /*width: 60% !important;*/
    }

    #settingsGrid .pgCell input[type=text] {
      width: 100%;
    }

    #settingsGrid .pgGroupRow {
      cursor: default;
    }

      #settingsGrid .pgGroupRow :hover {
        text-decoration: underline;
      }

    #settingsGrid .pgTable .pgCell {
      white-space: nowrap;
    }

    #settingsGrid .pgTable .pgRow {
      display: none;
    }

    .dialog-compact {
      font-size: 1em;
    }

      .dialog-compact.ui-dialog .ui-dialog-titlebar {
        padding-top: 0;
        padding-bottom: 0;
      }

    #waveRangesDialog tr.selected,
    #waveRangesDialog td.selected {
      background-color: lightblue;
    }

    #waveRangesDialog tr.istail {
      background-color: lightgray;
    }

    #waveRangesDialog th {
      text-align: center;
    }

    #waveRangesDialog td {
      text-align: right;
    }

    .isLong {
      background-color: lightgray;
    }
    /*strategiesDialog*/
    #strategiesDialog .modal-body li {
      cursor: pointer;
      margin-left: 20px;
    }

    #strategiesDialog .modal-body span.active-strategy {
      font-weight: bold;
    }

    #strategiesDialog .modal-body span:hover {
      text-decoration: underline;
    }

    div.ui-dialog-content.replay {
      background-color: #C9FEBE;
    }

      div.ui-dialog-content.replay.no {
        background-color: #FFBBB7;
      }

    .btn-plum {
      color: #fff;
      background-color: darkorchid;
      border-color: darkorchid;
    }

    .btn-olive {
      color: #fff;
      background-color: olive;
      border-color: olive;
    }

    input[type='button'].setTradeLevelActive {
      color: black;
      font-weight: bold;
    }

    .line .crosshair {
      fill: none;
      stroke-width: 1px;
    }

    .line #crosshairX,
    .line #crosshairY {
      fill: none;
      stroke: steelblue;
      stroke-width: 1px;
    }

    .overlay {
      fill: none;
      stroke: black;
      pointer-events: all;
      stroke-width: 0px;
    }

    svg {
      shape-rendering: optimizeSpeed;
    }

    .crosshair {
      cursor: crosshair;
    }

      .crosshair path.wire {
        stroke: #DDDDDD;
        stroke-dasharray: 1, 1;
      }

    table.error,
    table tbody.error {
      background-color: lightsalmon;
    }

    #wwwSettingsDialog.ui-dialog-content {
      min-height: 0 !important;
      padding: 0;
    }

    div.wwwInfo {
      font-size: inherit;
      padding: 0;
    }

      div.wwwInfo.ui-dialog.ui-dialog-content {
        padding: 0;
      }

    table.wwwInfo tbody tr td {
      text-align: right;
    }

    table.inline-edit td input {
      height: 100%;
      width: 100%;
      border: none;
      text-align: right;
    }

    .hide {
      display: none;
    }
  </style>
  <script>
    $(function () {
      $('.modal').on('show.bs.modal', function () {
        $(this).find('.modal-body').css({
          width: 'auto', //probably not needed
          height: 'auto', //probably not needed
          'max-height': '100%'
        });
      });
    });
  </script>
</head>

<body>
  <!--#region Nav bar-->
  <div class="navbar navbar-default" role="navigation">
    <div class="container" style="padding-left:0;padding-right:0">
      <!--#region Header-->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#"></a>
      </div>
      <!--#endregion-->
      <div class="collapse navbar-collapse">
        <!--#region Settings-->
        <ul class="nav navbar-nav navbar-right">
          <!-- ko if: isVirtual-->
          <li>
            <button id="toggleIsActive" data-bind="click:togglePause.bind(null,0)">
              <span class="glyphicon glyphicon-pause" data-bind="visible:!inPause()"></span>
              <span class="glyphicon glyphicon-play" data-bind="visible:inPause"></span>
            </button>
          </li>
          <li>
            <button data-bind="click: showReplayDialog" title="Back Testing">
              <span class="glyphicon glyphicon-fast-forward"></span>
            </button>
          </li>
          <!-- /ko -->
          <li>
            <button data-bind="click:showStrategies">
              <span class="glyphicon glyphicon-king"></span>
            </button>
          </li>
          <li>
            <button data-bind="click:readNews"
                    data-toggle="modal"
                    data-target="#newsDialog" title="Read News">
              <span class="glyphicon glyphicon-globe"></span>
            </button>
          </li>
          <li>
            <button class="dropdown-toggle" data-toggle="dropdown" role="button">
              <span class="glyphicon glyphicon-cog"></span>
            </button>
            <ul class="dropdown-menu" role="menu" aria-expanded="false">
              <li>
                <button data-bind="click:loadTradeSettings" title="Settings Chart Ticks"
                        data-toggle="modal"
                        data-target="#settingsDialog">
                  <span class="glyphicon glyphicon-cog"></span>
                </button>
                <button data-bind="click:loadTradeSettings2" title="Settings Chart Minutes"
                        data-toggle="modal"
                        data-target="#settingsDialog">
                  <span class="glyphicon glyphicon-cog"></span>
                </button>
                <button data-bind="click:getTradeDirectionTriggers" title="Trade Direction Triggers"
                        data-toggle="modal"
                        data-target="#tradeDirectionTriggersDialog">
                  <span class="glyphicon glyphicon-retweet"></span>
                </button>
                <button data-bind="click:getTradeOpenActions" title="On Trade Open Actions"
                        data-toggle="modal"
                        data-target="#tradeOpenActionsDialog">
                  <span class="glyphicon glyphicon-check"></span>
                </button>
              </li>
              <li role="presentation" class="divider"></li>
              <li>
                <button data-bind="click:startWwwInfo.bind($data,0)" title="Tick Stats">
                  <span class="glyphicon glyphicon-stats"></span>
                </button>
                <button data-bind="click:startWaveRanges.bind($data,1)" title="Minute Waves">
                  <span class="glyphicon glyphicon-stats"></span>
                </button>
                <button data-bind="click:getTradingConditions" title="Trade Conditions"
                        data-toggle="modal"
                        data-target="#tradeConditionsDialog">
                  <span class="glyphicon glyphicon-ok"></span>
                </button>
                <button data-toggle="modal"
                        data-target="#linksDialog" title="Links">
                  <span class="glyphicon glyphicon glyphicon-link"></span>
                </button>
              </li>
              <li role="presentation" class="divider"></li>
              <li>
                <button data-bind="click:startAccounting" title="Accounting">
                  <span class="glyphicon glyphicon-piggy-bank"></span>
                </button>
                <button data-bind="click:showWwwSettings" title="Www Settings">
                  <span class="glyphicon glyphicon-piggy-bank"></span>
                </button>
                <button data-bind="click:showOffers" title="Show Offers">
                  <span class="glyphicon glyphicon-piggy-bank"></span>
                </button>
                <button data-bind="click:showHedgingRatios" title="Show Hedge Ratios">
                  <i class="glyphicon glyphicon-retweet"></i>
                </button>

              </li>
            </ul>
          </li>


        </ul>
        <!--#endregion-->
        <!--#region Left bar-->
        <ul class="nav navbar-nav">
          <!--#region Other-->
          <li title="Buy / Sell">
            <button class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">...</button>
            <ul class="dropdown-menu multi-level">
              <li>
                <input type="button" value=' Buy ' id="buy" />
                <input type="button" value=" Sell " id="sell" />
                <button data-bind="click:toggleQuickTrade">
                  <span class="glyphicon glyphicon-exclamation-sign"></span>
                </button>
              </li>
              <li class="nav-divider">|</li>
              <li>
                <button data-bind="click:toggleClosedTrades">Trades</button>
                <button data-bind="click:toggleClosedTrades2,text:showClosedTrades2Text"></button>
              </li>
              <li>
                <button id="toggleIsActive" data-bind="click:toggleIsActive.bind($data,0)">Active 1</button>
                <button id="toggleIsActive" data-bind="click:toggleIsActive.bind($data,1)">Active 2</button>
              </li>
              <li><button data-bind="click:refreshCharts">Refresh Charts</button></li>
              <li><button data-bind="click:wrapTradeInCorridor">Wrap Trade</button></li>
            </ul>
          </li>
          <li class="nav-divider">|</li>
          <!--#endregion-->
          <li>
            <button class="dropdown-toggle" data-toggle="dropdown" role="button" area-expanded="false">
              <span class="glyphicon glyphicon-equalizer"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
              <li>
                <button id="buyDown">B<span class="glyphicon glyphicon-save"></span></button>
                <button id="buyUp">B<span class="glyphicon glyphicon-open"></span></button>
              </li>
              <li>
                <button id="sellDown">S<span class="glyphicon glyphicon-save"></span></button>
                <button id="sellUp">S<span class="glyphicon glyphicon-open"></span></button>
              </li>
              <li class="dropdown-submenu">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Trade Counts</a>
                <ul class="dropdown-menu" role="menu">
                  <li><button data-bind="click:setTradeCount.bind($data,0)">Trade Count:0</button></li>
                  <li><button data-bind="click:setTradeCount.bind($data,1)">Trade Count:1</button></li>
                  <li><button data-bind="click:setTradeCount.bind($data,2)">Trade Count:2</button></li>
                </ul>
              </li>
            </ul>
          </li>
          <!--#region Trade Levels-->
          <li>
            <button class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="glyphicon glyphicon-menu-hamburger"></span></button>
            <ul class="dropdown-menu multi-level md">
              <li>
                <input type="button" value="M" data-bind="click:setTradeLevels.bind($data,13,null),css:{setTradeLevelActive:tradePresetLevel()=='MinMax'}" title="Set trade levels to min/max" />
                <button type="button" class="btn-xs btn-olive" data-bind="click:setTradeTrendIndex.bind($data,0),css:{setTradeLevelActive:tradeTrendsInt().indexOf(0)>=0}">L</button>
                <button type="button" class="btn-xs btn-success" data-bind="click:setTradeTrendIndex.bind($data,1),css:{setTradeLevelActive:tradeTrendsInt().indexOf(1)>=0}">G</button>
                <input type="button" value="P" class="btn-xs btn-plum" data-bind="click:setTradeTrendIndex.bind($data,2),css:{setTradeLevelActive:tradeTrendsInt().indexOf(2)>=0}" />
                <input type="button" value="R" class="btn-xs btn-danger" data-bind="click:setTradeTrendIndex.bind($data,3),css:{setTradeLevelActive:tradeTrendsInt().indexOf(3)>=0}" />
                <input type="button" value="B" class="btn-xs btn-primary" data-bind="click:setTradeTrendIndex.bind($data,4),css:{setTradeLevelActive:tradeTrendsInt().indexOf(4)>=0}" />
              </li>
              <li>
                <input type="button" value="B" data-bind="click:setTradeLevels.bind($data,'BBand',null),css:{setTradeLevelActive:tradePresetLevel()=='BBand'}" title="Set trade levels to Boilinger" />
                <input type="button" value="TL" data-bind="click:setTradeLevels.bind($data,'TLMinMax',null),css:{setTradeLevelActive:tradePresetLevel()=='TLMinMax'}" title="Set trade levels to TL min/max" />
              </li>
              <li>
                <input type="button" value="L" class="btn-xs btn-olive" data-bind="click:setTradeLevels.bind($data,'Lime',null),css:{setTradeLevelActive:tradePresetLevel()=='Lime'}" />
                <input type="button" value="G" class="btn-xs btn-success" data-bind="click:setTradeLevels.bind($data,'Green',null),css:{setTradeLevelActive:tradePresetLevel()=='Green'}" />
                <input type="button" value="P" class="btn-xs btn-plum" data-bind="click:setTradeLevels.bind($data,'Plum',null),css:{setTradeLevelActive:tradePresetLevel()=='Plum'}" />
                <input type="button" value="R" class="btn-xs btn-danger" data-bind="click:setTradeLevels.bind($data,'Red',null),css:{setTradeLevelActive:tradePresetLevel()=='Red'}" />
                <input type="button" value="B" class="btn-xs btn-primary" data-bind="click:setTradeLevels.bind($data,'Blue',null),css:{setTradeLevelActive:tradePresetLevel()=='Blue'}" />
              </li>
              <li style="display:none">
                <input type="button" value="X" data-bind="click:resetTradeLevels" title="Clear trade levels" />
              </li>
              <li style="display:none" role="presentation" class="divider"></li>
              <!--Other sub menus-->
              <li style="display:none" class="dropdown-submenu">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Levels</a>
                <ul class="dropdown-menu">
                  <li>DImok</li>
                  <li>DImok</li>
                  <li>
                    <button>DImok</button>
                  </li>
                  <li class="dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown</a>
                    <ul class="dropdown-menu">
                      <li class="dropdown-submenu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown</a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Action</a></li>
                          <li><a href="#">Another action</a></li>
                          <li><a href="#">Something else here</a></li>
                          <li class="divider"></li>
                          <li><a href="#">Separated link</a></li>
                          <li class="divider"></li>
                          <li><a href="#">One more separated link</a></li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <!--#endregion-->
          <li class="nav-divider thin"></li>
          <li class="nav-divider thin"></li>
          <li>
            <button>
              <span class="glyphicon glyphicon-random" data-bind="click:flipTradeLevels" title="Flip trade levels"></span>
            </button>
          </li>
          <li>
            <button data-bind="click:manualToggle">
              <span class="glyphicon glyphicon-hand-right"></span>
            </button>
            <button id="toggleIsActive" data-bind="click:toggleIsActive.bind($data,0),style:{backgroundColor: isTradingActive()? '':'gold'}">
              <span class="glyphicon glyphicon-off"></span>
            </button>
          </li>
          <li data-bind="visible:strategiesSelected().length">
            <button class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
              <span class="glyphicon glyphicon-tower"></span>
            </button>
            <ul class="dropdown-menu multi-level" data-bind="foreach:strategiesSelected">
              <li>
                <button data-bind="text:nick,click:$parent.setStrategy.bind(null,$data)"></button>
              </li>
            </ul>
          </li>
          <!-- ko if:isQuickTrade -->
          <li class="nav-divider">|</li>
          <li class="nav-divider">|</li>
          <li>
            <input type="button" data-bind="click:buy,visible:canShowBuyButton" value=" Buy " />
            <input type="button" data-bind="click:sell,visible:canShowSellButton" value=" Sell " />
          </li>
          <li class="nav-divider">|</li>
          <!-- /ko -->
          <!-- ko if:canShowClose -->
          <li class="nav-divider">|</li>
          <li><input type="button" data-bind="click:closeTrades" value=" Close " /></li>
          <li><input type="button" data-bind="click:closeTradesAll" value="ALL" /></li>
          <!-- /ko -->
          <!-- ko ifnot:canShowClose -->
          <li class="nav-divider">|</li>
          <li>
            <input type="button" data-bind="click:stopTrades,visible:showStopTrades" value="Stop" title="Turn off CanTrade" />
            <button data-bind="click:startBuyTrades,visible:showBuyTrades">
              <span class="glyphicon glyphicon-arrow-up"></span>
            </button>
            <button data-bind="click:startSellTrades,visible:showSellTrades">
              <span class="glyphicon glyphicon-arrow-down"></span>
            </button>
          </li>
          <!-- /ko -->
          <li class="nav-divider">|</li>
          <li>
            <select data-bind="options:pairs,value:pairCurrent"></select>
            <select data-bind="options:pairs,value:pairHedgedCurrent"></select>
          </li>
          <!--#region Sample-->
          <li style="display:none">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Menu 2 <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
              <li class="divider"></li>
              <li><a href="#">One more separated link</a></li>
              <li class="dropdown-submenu">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown</a>
                <ul class="dropdown-menu">
                  <li><a href="#">Action</a></li>
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li><a href="#">Separated link</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown</a>
                    <ul class="dropdown-menu">
                      <li class="dropdown-submenu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown</a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Action</a></li>
                          <li><a href="#">Another action</a></li>
                          <li><a href="#">Something else here</a></li>
                          <li class="divider"></li>
                          <li><a href="#">Separated link</a></li>
                          <li class="divider"></li>
                          <li><a href="#">One more separated link</a></li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <!--#endregion-->
        </ul>
        <!--#endregion-->
      </div><!--/.nav-collapse -->
    </div>
  </div>
  <!--#endregion-->
  <!--#region Info Bar-->
  <div style="background-color: whitesmoke;border-bottom:1px solid silver;width:100%;margin-left:0">
    <span id="profit" data-bind="text:profit,css:{profit:profit()>0,loss:profit()<0}"></span>
    <span id="openTradeGross" data-bind="text:openTradeGross,css:{profit:openTradeGross()>0,loss:openTradeGross()<0},visible:openTradeGross()!=0"></span>
    <span id="discussion"></span>
    <span data-bind="visible:tradeConditionInfosAnd().length">&#x262D;</span>
    <!-- ko foreach: tradeConditionInfosAnd -->
    <span class="trade-condition" data-bind="text:key().slice(0,-2),css:{on:value()}"></span>
    <!-- /ko -->
    <span data-bind="visible:tradeConditionInfosOr().length">&#x262D;</span>
    <!-- ko foreach: tradeConditionInfosOr -->
    <span class="trade-condition or" data-bind="text:key().slice(0,-2),css:{on:value()}"></span>
    <!-- /ko -->
    <!-- ko if: false-->
    <!-- ko with: stats-->
    <span data-bind="text:Math.round(ucia[0]()*100,1)/100,visible:ucia[0]()"></span>/
    <span data-bind="text:Math.round(ucia[1]()*100,1)/100,visible:ucia[1]()"></span>|
    <span data-bind="text:Math.round(ucCmas[0]()*100,1)/100,visible:ucCmas[0]()"></span>/
    <span data-bind="text:Math.round(ucCmas[1]()*100,1)/100,visible:ucCmas[1]()"></span>
    <!-- /ko -->
    <!-- /ko -->
    <div style="width:4em;height:1.5em;position:absolute;left:0;top:0;display:none">
      <input data-bind="value:rsdMin" style="width:1.5em;" />
      <input data-bind="value:rsdMin2" style="width:1.5em;" />
    </div>
  </div>
  <!--#endregion-->
  <!--#region Charts-->
  <div data-bind="lineChart: chartData,lineChartPrice: price,chartNum:0"></div>
  <div data-bind="lineChart: chartData2,lineChartPrice: price,chartNum:1"></div>
  <!--#endregion-->
  <!--#region Dialogs-->
  <!--#region Settings dialog-->
  <div class="modal" id="settingsDialog" tabindex="-1" role="dialog" aria-labelledby="settingsDialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header" style="display:none">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <span class="modal-title" id="myModalLabel">Trade Settings</span>
        </div>
        <div class="modal-body">
          <div id="settingsGrid"></div>
          <button class="btn btn-primary btn-xs btn-block" data-bind="click:saveTradeSettings" data-dismiss="modal">Save</button>
        </div>
        <div class="modal-footer" style="display:none">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
        </div>
      </div>
    </div>
  </div>
  <!--#endregion-->
  <!--#region TradeConditions dialog-->
  <div class="modal" id="tradeConditionsDialog" tabindex="-1" role="dialog" aria-labelledby="tradeConditionsDialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <span class="modal-title" id="myModalLabel">Trade Conditions</span>
        </div>
        <div class="modal-body" data-bind="visible:tradingConditionsReady">
          <table>
            <tbody data-bind="foreach:tradeConditions">
              <tr>
                <td><input type="checkbox" data-bind="checked:checked,attr:{id:'chk'+name}" /></td>
                <td><label data-bind="text:name,attr:{for:'chk'+name}"></label></td>
              </tr>
            </tbody>
          </table>
          <button class="btn btn-primary btn-xs btn-block" data-bind="click:saveTradeConditions" data-dismiss="modal">Save</button>
        </div>
        <div class="modal-footer" style="display:none">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
        </div>
      </div>
    </div>
  </div>
  <!--#endregion-->
  <!--#region Strategies dialog-->
  <div class="modal" data-bind="elementer:strategiesDialog" id="strategiesDialog" tabindex="-1" role="dialog" aria-labelledby="strategiesDialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>-->
          <span class="modal-title" id="myModalLabel">Strategies</span>
          <input data-bind="textInput:strategyFilter" size="15" />
          <button data-bind="click: clearStrategy" title="Empty Strategy">
            <span class="glyphicon glyphicon-flash"></span>
          </button>
          <button title="Show Strategies Source">
            <a href="https://gist.github.com/dimokgit" target="_blank" class="glyphicon glyphicon-book"></a>
            <!--<a href="https://shrib.com/hedgehog?v=md" target="_blank" class="glyphicon glyphicon-book"></a>-->
          </button>
        </div>
        <div class="modal-body" data-bind="foreach:strategiesFiltered">
          <div data-bind="attr:{title:name}">
            <input data-bind="checked:isSelected" type="checkbox" />
            <span data-bind="text:nick,click:$parent.updateStrategy,css:{'active-strategy':isActive}"></span>
            <a data-bind="attr:{href:uri}" target="_blank" class="glyphicon glyphicon-list"></a>
          </div>
        </div>
        <div class="modal-footer" style="display:none">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
        </div>
      </div>
    </div>
  </div>
  <!--#endregion-->
  <!--#region wwwInfo-->
  <div data-bind="elementer:wwwInfoDialog" class="wwwInfo" style="display:none;padding:0">
    <table border="1" cellspacing="0" class="wwwInfo">
      <tbody data-bind="foreach:wwwInfo">
        <tr>
          <td data-bind="text:n"></td>
          <td>:</td>
          <td data-bind="text:v"></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div>
  <!--#endregion-->
  <!--#region Offers-->
  <div class="modal" data-bind="elementer:offersDialog" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <div class="modal-title" id="myModalLabel">
            <a href="https://mlab.com/databases/forex/collections/offers" target="_blank">Offers</a>
            <span data-bind="click:getMMRs" style="text-decoration:underline">Get MMRs</span>
            <span data-bind="click:loadOffers" style="text-decoration:underline">Load Offers</span>
            <span data-bind="click:saveOffers" style="text-decoration:underline">Save Offers</span>
          </div>
        </div>
        <div class="modal-body">
          <table border="1" cellspacing="0" class="wwwInfo inline-edit">
            <tbody data-bind="foreach:offers">
              <tr>
                <td data-bind="text:pair"></td>
                <td><input data-bind="value:mmrBuy,event:{change:$parent.updateOffer}" /></td>
                <td><input data-bind="value:mmrSell,event:{change:$parent.updateOffer}" /></td>
                <td data-bind="text:pipBuy"></td>
                <td data-bind="text:pipSel"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <!--#endregion-->
  <!--#region wwwSettings-->
  <div data-bind="elementer:wwwSettingsDialog" id="wwwSettingsDialog" style="display:none">
    <div data-bind="elementer:wwwSettingsGrid">
      <table border="1" class="wwwInfo">
        <tbody data-bind="foreach:wwwSettingProperties">
          <tr>
            <td data-bind="text:n"></td>
            <td><input data-bind="value:v" size="15" /></td>
          </tr>
        </tbody>
        <tbody>
          <tr><td>Mouse Date 0</td><td data-bind="text:chartDateFormat(chartArea[0].mouseData().d)"></td></tr>
          <tr><td>Mouse Date 1</td><td data-bind="text:chartDateFormat(chartArea[1].mouseData().do)"></td></tr>
        </tbody>
        <tbody>
          <tr>
            <td><input data-bind="textInput:newTradingMacroName" size="7" title="New TradingMacro name" /></td>
            <td><input data-bind="click:saveTradingMacros" value="Save New Macto" type="button" style="padding:0px"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <!--#endregion-->
  <!--#region replayDialog-->
  <div data-bind="elementer:replayDialog,css:{no:!isReplayOn()}" class="replay" style="display:none;min-height:20px">
    <div>
      <button data-bind="css:{'text-muted':!isReplayOn()},enable:isReplayOn,click:stopReplay">
        <span class="glyphicon glyphicon-stop"></span>
      </button>
      <input data-bind="value:replayDateStart" size="13" />
      <button data-bind="css:{'text-muted':isReplayOn()},disable:isReplayOn,click:startReplay">
        <span class="glyphicon glyphicon-play"></span>
      </button>
    </div>
  </div>
  <!--#endregion-->
  <!--#region-->
  <div data-bind="elementer:accountingDialog" style="display:none">
    <table class="accounting" data-bind="" border="1" cellspacing="0">
      <tbody data-bind="foreach: accounting,css:{error:accountingError}">
        <tr data-bind="style:{backgroundColor:v.c || ''}">
          <td data-bind="text:n"></td>
          <td data-bind="html:v.v || v"></td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td>GrossToExit</td>
          <td>
            <input data-bind="textInput:grossToExit" size="5" style="padding:0px" />
            <input data-bind="click:saveGrossToExit" value="Save" type="button" style="padding:0px" />
        </tr>
        <tr>
          <td>PrfByHdgRatio</td>
          <td>
            <input data-bind="textInput:profitByHedgeRatioDiff" size="5" style="padding:0px" />
            <input data-bind="click:saveProfitByHedgeRatioDiff" value="Save" type="button" style="padding:0px" />
        </tr>
    </table>
    </td>
    </tr>
    </tfoot>
    </table>
  </div>
  <!--#endregion-->
  <!--#region WaveRanges dialog-->
  <div data-bind="elementer:waveRangesDialog" style="display:none">
    <table border="1" id="waveRangesDialog">
      <thead>
        <tr>
          <th>SD</th>
          <th>HSD</th>
          <th>M</th>
          <th>Ds</th>
          <th>PpM</th>
          <th>Ang</th>
          <!--<th>DR</th>
          <th>Dc</th>-->
        </tr>
        <tr style="background-color:gold" data-bind="visible:false && sumStartIndex()">
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <td><span data-bind="text:dbrSum"></span></td>
          <td><span data-bind="text:distanceSum"></span></td>
          <td><span data-bind="text:distanceCmaSum"></span></td>
        </tr>
      </thead>
      <tbody data-bind="foreach:waveRanges">
        <tr data-bind="css:{selected:$parent.sumStartIndexById() == $index(),istail:IsTail}">
          <td><span data-bind="text:d3.format('.2f')(StDev.v),style:{fontWeight:StDev.mx?'bold':''}"></span></td>
          <td><span data-bind="text:d3.format('.1f')(HSD.v),style:{fontWeight:HSD.mx?'bold':''}"></span></td>
          <td><span data-bind="text:d3.format('.0f')(Minutes.v),style:{fontWeight:Minutes.mx?'bold':''}"></span></td>
          <td><span data-bind="text:d3.format('.0f')(Distance.v),style:{fontWeight:Distance.mx?'bold':''}"></span></td>
          <td><span data-bind="text:d3.format('.1f')(PPM.v),style:{fontWeight:PPM.mx?'bold':''}"></span></td>
          <!--          <td><span data-bind="text:d3.format('.0f')(Angle.v),style:{fontWeight:Angle.mx?'bold':''}"></span></td>-->
          <td><span data-bind="text:d3.format('.0f')(Power.v),style:{fontWeight:Power.mx?'bold':''}"></span></td>
        </tr>
      </tbody>
      <tfoot data-bind="foreach:waveRangesStats" style="background-color:gold">
        <tr>
          <td><span data-bind="text:StDev.v"></span></td>
          <td><span data-bind="text:d3.format('.1f')(HSD.v)"></span></td>
          <td><span data-bind="text:d3.format('.0f')(Minutes.v)"></span></td>
          <td><span data-bind="text:d3.format('.0f')(Distance.v)"></span></td>
          <td><span data-bind="text:d3.format('.1f')(PPM.v)"></span></td>
          <!--          <td><span data-bind="text:d3.format('.0f')(Angle.v)"></span></td>-->
          <td><span data-bind="text:d3.format('.0f')(0)"></span></td>
        </tr>
      </tfoot>
    </table>
  </div>
  <!--#endregion-->
  <!--#region TradeDIrectionTriggers dialog-->
  <div class="modal" id="tradeDirectionTriggersDialog" tabindex="-1" role="dialog" aria-labelledby="tradeDirectionTriggersDialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <span class="modal-title" id="myModalLabel">Trade Direction Triggers</span>
        </div>
        <div class="modal-body" data-bind="visible:tradeDirectionTriggersReady">
          <table>
            <tbody data-bind="foreach:tradeDirectionTriggers">
              <tr>
                <td><input type="checkbox" data-bind="checked:checked,attr:{id:'chk'+name}" /></td>
                <td><label data-bind="text:name,attr:{for:'chk'+name}"></label></td>
              </tr>
            </tbody>
          </table>
          <button class="btn btn-primary btn-xs btn-block" data-bind="click:saveTradeDirectionTriggers" data-dismiss="modal">Save</button>
        </div>
      </div>
    </div>
  </div>
  <!--#endregion-->
  <!--#region TradeOpenActions dialog-->
  <div class="modal" id="tradeOpenActionsDialog" tabindex="-1" role="dialog" aria-labelledby="tradeOpenActionsDialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <span class="modal-title" id="myModalLabel">Trade Conditions</span>
        </div>
        <div class="modal-body" data-bind="visible:tradeOpenActionsReady">
          <table>
            <tbody data-bind="foreach:tradeOpenActions">
              <tr>
                <td><input type="checkbox" data-bind="checked:checked,attr:{id:'chk'+name}" /></td>
                <td><label data-bind="text:name,attr:{for:'chk'+name}"></label></td>
              </tr>
            </tbody>
          </table>
          <button class="btn btn-primary btn-xs btn-block" data-bind="click:saveTradeOpenActions" data-dismiss="modal">Save</button>
        </div>
        <div class="modal-footer" style="display:none">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
        </div>
      </div>
    </div>
  </div>
  <!--#endregion-->
  <!--#region CheatSheet-->
  <div class="modal" id="cheatSheetDialog" tabindex="-1" role="dialog" aria-labelledby="cheatSheetDialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <span class="modal-title" id="myModalLabel">Before Trade</span>
        </div>
        <div class="modal-body">
          <ul>
            <li>Trading Hours</li>
            <li>Take Profit Size</li>
            <li>Double Tap</li>
            <li>Two Corridors</li>
            <li>Upcoming News</li>
            <li>Do not be greedy</li>
            <li>Should play both directions?</li>
            <li>Should take last loss back?</li>
            <li>
              News: Explode | Impload<br />
              Explode: stay away<br />
              Implode: Trade inside direction
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <!--#endregion-->
  <div class="modal" id="linksDialog" tabindex="-1" role="dialog" aria-labelledby="linksDialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <span class="modal-title" id="myModalLabel">Links</span>
        </div>
        <div class="modal-body">
          <a href="https://dimok.loggly.com/search" target="_blank">Event Log</a>
          <a href="https://mlab.com/databases/forex" target="_blank">MLab</a>
        </div>
      </div>
    </div>
  </div>
  <!--#region News-->
  <div class="modal" id="newsDialog" tabindex="-1" role="dialog" aria-labelledby="newsDialog" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <span class="modal-title" id="myModalLabel">News</span>
          <a href="http://www.econoday.com/economic-calendar.aspx" target="_blank">Calendar</a>
          <a href="https://www.dailyfx.com/calendar" target="_blank">DailyFX</a>

        </div>
        <div class="modal-body">
          <table border="1">
            <!-- ko foreach: newsGrouped -->
            <thead>
              <tr>
                <th colspan="10" data-bind="text:date"></th>
              </tr>
            </thead>
            <tbody data-bind="foreach:values">
              <tr data-bind="style:{fontWeight:Level == 'H'?'bold':''}">
                <td data-bind="text:Country,style:{backgroundColor:Level == 'H'?'coral':''}"></td>
                <td data-bind="text:Time.toLocaleTimeString()" style="text-align:right;padding-left:5px;padding-right:1px;white-space:nowrap"></td>
                <td data-bind="text:Name"></td>
              </tr>
            </tbody>
            <!-- /ko -->
          </table>
        </div>
      </div>
    </div>
    <!--#endregion-->
    <!--#region Settings grid-->
    <!--#endregion-->
    <!--#endregion-->
  </div>

  <!--#region Strategies dialog-->
  <div data-bind="elementer:strategyNameDialog" class="modal" tabindex="-1" role="dialog" aria-labelledby="strategyNameDialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <span class="modal-title" id="myModalLabel">Strategy Name</span>
        </div>
        <div class="modal-body">
          <input data-bind="value:strategyNick,elementer:strategyNameInput" style="width:100%" />
          <div>
            <div style="display:inline-block">
              <button data-bind="click:setStrategy.bind(null)">Load</button>
              <button data-bind="click:removeStrategy.bind(null,false)">Archive</button>
            </div>
            <div style="display:inline-block;float:right">
              <button data-bind="click:saveStrategy.bind(null)">Save</button>
              <button data-bind="click:removeStrategy.bind(null,true)">Remove</button>
            </div>
          </div>
          <div class="modal-footer" style="display:none">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--#endregion-->
  <!--#region HedgingRatios-->
  <div data-bind="elementer:hedgingRatiosDialog" style="display:none;padding:0">
    <table border="1" cellspacing="0" data-bind="css:{error:hedgingRatiosError}" class="wwwInfo">
      <colgroup>
        <col />
        <col />
        <col />
        <col />
        <col style="background-color:khaki" />
        <col style="background-color:khaki" />
      </colgroup>
      <thead>
        <tr>
          <td>Pair</td>
          <td>HVP</td>
          <td>HVPR</td>
          <td>HVPMR</td>
          <td>HVR</td>
          <!--<td>HVR</td>-->
          <td>HVRM1</td>
          <!--<td>HVRM1</td>-->
          <td>Amount</td>
          <!--<td>Amount</td>-->
          <td>Lot</td>
          <td>Pip</td>
    <!--      <td>Pip</td>-->
          <td>MMR</td>
          <td>IsBuy</td>
        </tr>
      </thead>
      <tbody data-bind="foreach:hedgingRatios">
        <tr>
          <td data-bind="text:Pair"></td>
          <td data-bind="text:HVP"></td>
          <td data-bind="text:HVPR"></td>
          <td data-bind="text:HVPM1R"></td>
          <td data-bind="text:d3.format('.1f')(TradeRatio)"></td>
          <!--<td data-bind="text:d3.format('.1f')(TradeRatio2)"></td>-->
          <td data-bind="text:d3.format('.1f')(TradeRatioM1)"></td>
          <!--<td data-bind="text:d3.format('.1f')(TradeRatioM12)"></td>-->
          <td data-bind="text:d3.format('.0f')(TradeAmount)"></td>
          <!--<td data-bind="text:d3.format('.0f')(TradeAmount2)"></td>-->
          <td data-bind="text:Lot"></td>
<!--          <td data-bind="text:Lot2"></td>-->
          <td data-bind="text:Pip"></td>
        <!--  <td data-bind="text:Pip2"></td>-->
          <td data-bind="text:d3.format('.2f')(MMR)"></td>
          <td>
            <button data-bind="text:IsBuy?' Buy':'Sell',click:$parent.openHedgeTrade,css:{hide:!IsPrime}"></button>
            <span data-bind="text:IsBuy?'Buy':'Sell',css:{hide:IsPrime}"></span>
          </td>
        </tr>
      </tbody>
    </table>
    <input data-bind="value:hedgeVirtualDate" />
    <button data-bind="click:openHedgeVirtual.bind($data,true)">Buy</button>
    <button data-bind="click:openHedgeVirtual.bind($data,false)">Sell</button>
    <button data-bind="click:clearHedgeVirtualTrades">Clear</button>
    <table border="1" class="wwwInfo">
      <tbody data-bind="foreach:hedgeTradesVirtualDataSource">
        <tr>
          <!-- ko foreach: $data -->
          <td data-bind="text: $data"></td>
          <!-- /ko -->
        </tr>
      </tbody>
    </table>
    <table>
      <tbody data-bind="foreach:hedgingStats">
        <tr>
          <td data-bind="text:n"></td>
          <td data-bind="text:v"></td>
        </tr>
      </tbody>
    </table>
  </div>
  <!--#endregion-->

  <script src='d3-knockout/app.js'></script>
</body>
</html>